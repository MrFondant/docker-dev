<VirtualHost *:80>
    ServerName my.pub.localhost
    ServerAlias *.pub.localhost

    SetOutputFilter DEFLATE

    # NOTE: this config will map "firefly.pub.localhost" to /var/www/html/firefly/public
    UseCanonicalName Off
    VirtualDocumentRoot /var/www/html/%1/public/

    <Directory /var/www/html>
        Options +FollowSymLinks -Indexes -Includes

        AllowOverride All
        Order deny,allow
        Allow from all
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName my.php5.localhost
    ServerAlias *.php5.localhost

    # NOTE: this config will redirect "firefly.php5.localhost" to firefly.php5.localhost:8056
    RewriteCond %{SERVER_PORT} !^8056 [NC]
    RewriteRule ^ http://%{HTTP_HOST}:8056%{REQUEST_URI} [R=301,QSA,L]

    # NOTE: Ideally we'd proxy it, but I can't get it working :(
    # ProxyPreserveHost On
    # <Proxy *>
    #     Order deny,allow
    #     Allow from all
    # </Proxy>
    # ProxyPreserveHost On
    # ProxyRequests Off
    # ProxyPass / http://localhost:8056/
    # ProxyPassReverse / http://localhost:8056/
</VirtualHost>

<VirtualHost *:80>
    ServerName my.localhost
    ServerAlias *.localhost

    SetOutputFilter DEFLATE

    # NOTE: this config will map "firefly.localhost" to /var/www/html/firefly
    UseCanonicalName Off
    VirtualDocumentRoot /var/www/html/%1/

    <Directory /var/www/html>
        Options +FollowSymLinks -Indexes -Includes

        AllowOverride All
        Order deny,allow
        Allow from all
        Require all granted
    </Directory>
</VirtualHost>
